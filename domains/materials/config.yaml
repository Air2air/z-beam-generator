# Materials Domain Configuration
# Material description and micro generation settings
#
# NOTE: Word counts are defined in domain prompts (Option B: Prompts Only)
# NOTE: Extraction strategies are centralized in generation/config.yaml

# =============================================================================
# DOMAIN ADAPTER CONFIGURATION (Required for DomainAdapter)
# =============================================================================
data_path: "data/materials/Materials.yaml"
data_root_key: "materials"
author_key: "author.id"  # Author assigned ONCE, never changes (immutable)
context_keys:
  - category
  - subcategory
  - properties.density
  - properties.melting_point

# Frontmatter sync configuration (domain-agnostic architecture)
frontmatter_directory: "frontmatter/materials"
frontmatter_filename_pattern: "{slug}-laser-cleaning.yaml"

# Materials-specific randomization targets
# NOTE: Length targets REMOVED - now in prompts
randomization_targets:
  
  # Structural approaches for material descriptions
  structures:
    problem_focused:
      label: "Problem-Focused"
      description: "Start with challenge → explain why → solution"
      probability: 0.20
    contrast_based:
      label: "Contrast-Based"
      description: "Compare materials → highlight difference → impact"
      probability: 0.20
    process_focused:
      label: "Process-Focused"
      description: "Walk through setup → embed properties naturally"
      probability: 0.20
    experience_based:
      label: "Experience-Based"
      description: "Share what works → why → what to avoid"
      probability: 0.20
    property_driven:
      label: "Property-Driven"
      description: "Lead with ONE property → deep exploration"
      probability: 0.20
  
  # Property integration strategies
  property_strategies:
    scattered:
      label: "SCATTERED INTEGRATION"
      description: "Distribute properties throughout narrative (never list)"
      probability: 0.25
    deep_dive:
      label: "DEEP DIVE ONE"
      description: "Focus deeply on ONE property first, mention others briefly later"
      probability: 0.25
    comparative:
      label: "COMPARATIVE"
      description: "Use properties to compare/contrast with similar materials"
      probability: 0.25
    problem_solution:
      label: "PROBLEM-SOLUTION"
      description: "Present property as solution to specific challenge"
      probability: 0.25
  
  # Warning placement options
  warning_placements:
    early:
      label: "EARLY WARNING"
      description: "Start with critical safety/setup concern (first 2-3 sentences)"
      probability: 0.33
    mid_flow:
      label: "MID-FLOW WARNING"
      description: "Embed warning naturally in middle of narrative"
      probability: 0.33
    concluding:
      label: "CONCLUDING WARNING"
      description: "End with key caution or recommendation"
      probability: 0.34

# =============================================================================
# PROMPT TEMPLATES
# =============================================================================
# Usage:
#   from shared.generation.yaml_helper import load_yaml_file
#   config = load_yaml_file("domains/materials/config.yaml")
#   template = config['prompts']['micro']

prompts:
  # Micro for before/after images at 1000x magnification
  micro: |
    You are {author} from {country}, writing a micro about {material}.

    TASK: Write two short paragraphs describing {material} at 1000x magnification.
    - Paragraph 1: Contaminated surface before laser cleaning  
    - Paragraph 2: Clean surface after laser treatment

    VOICE & APPROACH:
    Write like you're explaining results to a colleague - direct, practical, grounded in what you see. Use active voice and straightforward descriptions.

    {technical_guidance}

    {sentence_guidance}

    FORMATTING:
    - Complete sentences (no fragments)
    - Vary sentence lengths (mix short, medium, longer)
    - Start each sentence differently
    - Separate the two paragraphs with ONE blank line
    - NO labels like "Before:", "After:"

    AVOID:
    - Corporate jargon: "facilitates", "leverages", "demonstrates"
    - Theatrical: "zapped clean", "stares back", "changes everything"
    - Academic: "results suggest", "testament to"
    - Repetitive openings

    OUTPUT: Just the two paragraphs.

    Generate micro for {material}:

  # FAQ questions and answers for material page
  faq: |
    You are {author} from {country}, writing a FAQ about {material}.

    TASK: Write {faq_count} practical questions and answers about laser cleaning {material}.
    - Questions that users actually ask (troubleshooting, best practices, material behavior)
    - Direct, helpful answers with specific details

    VOICE & APPROACH:
    Write like you're answering colleague questions - direct, practical, grounded in real-world use. Use active voice and conversational tone.

    {technical_guidance}

    {sentence_guidance}

    FORMATTING:
    For each question, format as:

    **[Question text ending with ?]**

    [Answer paragraph - vary length naturally]

    [Blank line before next question]

    AVOID:
    - Corporate jargon: "facilitates", "leverages", "optimal solutions"
    - Theatrical: "game-changer", "revolutionary", "transforms everything"
    - Academic: "it is worth noting", "one might consider"
    - Repetitive openings
    - Uniform answer lengths

    CONTEXT:
    {facts}

    OUTPUT: Just the Q&A pairs, formatted as shown above.

    Generate {faq_count} FAQ pairs for {material}:

  material_description: |
    You are {author}, writing a professional technical subtitle about {material}.

    CONTENT STRATEGY:
    - Focus on: The material's PRIMARY advantage (e.g., aluminum = lightweight, silver = conductivity, titanium = strength-to-weight)
    - Secondary mention: Laser cleaning characteristics ONLY if they're the material's most distinctive trait
    - Logic: Focus on practical outcome ("what it does", "why it's popular") not technical cause ("what it measures")

    STRUCTURE REQUIREMENTS:
    - Format: Direct declarative statement  
    - NO questions, NO "What makes...", NO "Why choose..."
    - VARY sentence openings - avoid repetitive patterns
    - End without period (concise statement)

    FORMATTING:
    - Single sentence

    CONTENT APPROACH:
    - Describe differences with materials in the same category 
    - Avoid raw technical specifications (Ω·m, g/cm³, MPa, W)
    - Explain advantages in plain terms

    BANNED OPENING PATTERNS:
    - "[Material] enables/achieves/delivers/provides..."
    - "Laser cleaning of [material]..."
    - "[Gerund phrase] with [material]..."
    - "[Abstract process subject] gains/enables..."

    Write the subtitle:
