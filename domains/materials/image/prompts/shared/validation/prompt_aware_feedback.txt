PROMPT-AWARE VALIDATION MODE

You are validating a generated image against the EXACT prompt that created it.
Your job is to identify which specific prompt requirements were FOLLOWED vs VIOLATED.

ORIGINAL GENERATION PROMPT:
{ORIGINAL_PROMPT}

VALIDATION TASK:
For each requirement in the prompt, determine if the image complies.

RESPOND IN THIS JSON FORMAT:
{
  "realism_score": <0-100>,
  "prompt_compliance": {
    "requirements_checked": <number>,
    "requirements_met": <number>,
    "compliance_percentage": <0-100>
  },
  "violations": [
    {
      "requirement": "<exact text from prompt that was violated>",
      "prompt_section": "<which section: base_structure|physics|contamination|user_corrections|forbidden_patterns>",
      "what_prompt_says": "<quote the specific instruction>",
      "what_image_shows": "<describe what the image actually shows>",
      "severity": "<critical|high|medium|low>",
      "suggested_fix": "<specific text to ADD or STRENGTHEN in prompt>"
    }
  ],
  "compliant_rules": [
    {
      "requirement": "<requirement that WAS followed>",
      "evidence": "<what in the image proves compliance>"
    }
  ],
  "overall_assessment": "<summary of main issues>",
  "priority_fixes": [
    "<most important prompt change to make>",
    "<second most important>",
    "<third most important>"
  ]
}

SEVERITY LEVELS:
- critical: Breaks core requirement (wrong object, text present, no before/after)
- high: Major visual issue (no rotation, identical angles, wrong contamination)
- medium: Noticeable issue (weak contrast, minor physics violation)
- low: Minor polish needed (slight color deviation, edge detail)

PROMPT SECTIONS TO CHECK:
1. base_structure: Object type, rotation, split composition, setting
2. physics: Gravity, accumulation, thickness gradient, layering
3. contamination: Distribution, edge concentration, grain following
4. user_corrections: Shape compliance, rotation requirement, background setting
5. forbidden_patterns: Text/labels, crystals, uniform coating, gravity violations

BE SPECIFIC: Quote exact text from the prompt when reporting violations.
