# Structural Parity Report

> Auto-generated by `scripts/audit/structural_parity.py`  
> Re-run after each consolidation session to track progress.

## Summary

| Metric | Value |
|--------|-------|
| Total domain Python files | 48 |
| Total domain lines | 17,762 |
| HIGH priority findings | 15 |
| MEDIUM priority findings | 20 |
| LOW priority findings | 14 |
| Estimated lines removable | ~837 |

## Per-domain file counts

- **applications**: 1 files, 96 lines
- **compounds**: 2 files, 550 lines
- **contaminants**: 15 files, 5,425 lines
- **materials**: 27 files, 11,093 lines
- **settings**: 3 files, 598 lines

---

## Consolidation Targets

> Ordered by: priority â†’ estimated lines saved

### ðŸ”´ HIGH PRIORITY

#### `[method_overlap]` `_validate_loaded_data()` â€” appears in 4 domains (~33 lines saved)
- Domains: `compounds`, `contaminants`, `materials`, `settings`
  compounds: `CompoundsDataLoader._validate_loaded_data(self, data) â†’ bool` (L62, ~11 lines)
  contaminants: `ContaminantsDataLoader._validate_loaded_data(self, data) â†’ bool` (L75, ~11 lines)
  materials: `MaterialsDataLoader._validate_loaded_data(self, data) â†’ bool` (L76, ~11 lines)
  settings: `SettingsDataLoader._validate_loaded_data(self, data) â†’ bool` (L66, ~11 lines)

#### `[loader_gap]` `_validate_loaded_data()` in 4 loaders but not in BaseDataLoader (~33 lines saved)
- Domains: `compounds`, `contaminants`, `materials`, `settings`
  compounds/loaders/data_loader_v2: `_validate_loaded_data(self, data) â†’ bool` (~11 lines)
  contaminants/loaders/data_loader_v2: `_validate_loaded_data(self, data) â†’ bool` (~11 lines)
  materials/loaders/data_loader_v2: `_validate_loaded_data(self, data) â†’ bool` (~11 lines)
  settings/loaders/data_loader_v2: `_validate_loaded_data(self, data) â†’ bool` (~11 lines)

#### `[loader_gap]` `__init__()` in 4 loaders but not in BaseDataLoader (~24 lines saved)
- Domains: `compounds`, `contaminants`, `materials`, `settings`
  compounds/loaders/data_loader_v2: `__init__(self, project_root)` (~7 lines)
  contaminants/loaders/data_loader_v2: `__init__(self, project_root)` (~6 lines)
  materials/loaders/data_loader_v2: `__init__(self, project_root)` (~14 lines)
  settings/loaders/data_loader_v2: `__init__(self, project_root)` (~6 lines)

#### `[method_overlap]` `_get_item_data()` â€” appears in 5 domains (~20 lines saved)
- Domains: `applications`, `compounds`, `contaminants`, `materials`, `settings`
  applications: `ApplicationsCoordinator._get_item_data(self, item_id) â†’ Dict` (L50, ~5 lines)
  compounds: `CompoundCoordinator._get_item_data(self, item_id) â†’ Dict` (L42, ~5 lines)
  contaminants: `ContaminantCoordinator._get_item_data(self, item_id) â†’ Dict` (L47, ~5 lines)
  materials: `MaterialsCoordinator._get_item_data(self, item_id) â†’ Dict` (L65, ~5 lines)
  settings: `SettingCoordinator._get_item_data(self, item_id) â†’ Dict` (L48, ~5 lines)

#### `[method_overlap]` `_create_data_loader()` â€” appears in 5 domains (~16 lines saved)
- Domains: `applications`, `compounds`, `contaminants`, `materials`, `settings`
  applications: `ApplicationsCoordinator._create_data_loader(self)` (L38, ~6 lines)
  compounds: `CompoundCoordinator._create_data_loader(self)` (L38, ~2 lines)
  contaminants: `ContaminantCoordinator._create_data_loader(self)` (L38, ~7 lines)
  materials: `MaterialsCoordinator._create_data_loader(self)` (L57, ~2 lines)
  settings: `SettingCoordinator._create_data_loader(self)` (L38, ~4 lines)

#### `[method_overlap]` `_save_content()` â€” appears in 5 domains (~16 lines saved)
- Domains: `applications`, `compounds`, `contaminants`, `materials`, `settings`
  applications: `ApplicationsCoordinator._save_content(self, item_id, component_type, content, author_id) â†’ None` (L57, ~4 lines)
  compounds: `CompoundCoordinator._save_content(self, item_id, component_type, content, author_id) â†’ None` (L49, ~4 lines)
  contaminants: `ContaminantCoordinator._save_content(self, item_id, component_type, content, author_id) â†’ None` (L54, ~4 lines)
  materials: `MaterialsCoordinator._save_content(self, item_id, component_type, content, author_id) â†’ None` (L72, ~4 lines)
  settings: `SettingCoordinator._save_content(self, item_id, component_type, content, author_id) â†’ None` (L55, ~4 lines)

#### `[module_func]` `get_loader()` module-level â€” 4 domains (~15 lines saved)
- Domains: `compounds`, `contaminants`, `materials`, `settings`
  compounds: `get_loader() â†’ CompoundsDataLoader` (L407, ~5 lines)
  contaminants: `get_loader() â†’ ContaminantsDataLoader` (L363, ~5 lines)
  materials: `get_loader() â†’ MaterialsDataLoader` (L414, ~5 lines)
  settings: `get_loader() â†’ SettingsDataLoader` (L239, ~5 lines)

#### `[method_overlap]` `domain_name()` â€” appears in 5 domains (~8 lines saved)
- Domains: `applications`, `compounds`, `contaminants`, `materials`, `settings`
  applications: `ApplicationsCoordinator.domain_name(self) â†’ str` (L34, ~2 lines)
  compounds: `CompoundCoordinator.domain_name(self) â†’ str` (L34, ~2 lines)
  contaminants: `ContaminantCoordinator.domain_name(self) â†’ str` (L34, ~2 lines)
  materials: `MaterialsCoordinator.domain_name(self) â†’ str` (L53, ~2 lines)
  settings: `SettingCoordinator.domain_name(self) â†’ str` (L34, ~2 lines)

#### `[method_overlap]` `_get_data_file_path()` â€” appears in 4 domains (~6 lines saved)
- Domains: `compounds`, `contaminants`, `materials`, `settings`
  compounds: `CompoundsDataLoader._get_data_file_path(self) â†’ Path` (L58, ~2 lines)
  contaminants: `ContaminantsDataLoader._get_data_file_path(self) â†’ Path` (L71, ~2 lines)
  materials: `MaterialsDataLoader._get_data_file_path(self) â†’ Path` (L72, ~2 lines)
  settings: `SettingsDataLoader._get_data_file_path(self) â†’ Path` (L62, ~2 lines)

#### `[loader_gap]` `_get_data_file_path()` in 4 loaders but not in BaseDataLoader (~6 lines saved)
- Domains: `compounds`, `contaminants`, `materials`, `settings`
  compounds/loaders/data_loader_v2: `_get_data_file_path(self) â†’ Path` (~2 lines)
  contaminants/loaders/data_loader_v2: `_get_data_file_path(self) â†’ Path` (~2 lines)
  materials/loaders/data_loader_v2: `_get_data_file_path(self) â†’ Path` (~2 lines)
  settings/loaders/data_loader_v2: `_get_data_file_path(self) â†’ Path` (~2 lines)

#### `[file_name]` `coordinator.py` â€” identical path in 5 domains
- Domains: `applications`, `compounds`, `contaminants`, `materials`, `settings`
  applications: domains/applications/coordinator.py
  compounds: domains/compounds/coordinator.py
  contaminants: domains/contaminants/coordinator.py
  materials: domains/materials/coordinator.py
  settings: domains/settings/coordinator.py

#### `[file_name]` `loaders/data_loader_v2.py` â€” identical path in 4 domains
- Domains: `compounds`, `contaminants`, `materials`, `settings`
  compounds: domains/compounds/loaders/data_loader_v2.py
  contaminants: domains/contaminants/loaders/data_loader_v2.py
  materials: domains/materials/loaders/data_loader_v2.py
  settings: domains/settings/loaders/data_loader_v2.py

#### `[import_drift]` `shared.cache.manager.cache_manager` â€” used by 4 domains, absent in 1
- Domains: `compounds`, `contaminants`, `materials`, `settings`
  Uses: compounds, contaminants, materials, settings
  Missing: applications

#### `[import_drift]` `shared.data.legacy.base_loader.BaseDataLoader` â€” used by 4 domains, absent in 1
- Domains: `compounds`, `contaminants`, `materials`, `settings`
  Uses: compounds, contaminants, materials, settings
  Missing: applications

#### `[import_drift]` `shared.exceptions.ConfigurationError` â€” used by 3 domains, absent in 2
- Domains: `contaminants`, `materials`, `settings`
  Uses: contaminants, materials, settings
  Missing: applications, compounds

### ðŸŸ¡ MEDIUM PRIORITY

**ðŸŸ¡ MEDIUM** â€” `_build_frontmatter_data()` â€” appears in 2 domains (~121 lines saved)
  - Domains: `contaminants`, `settings`

**ðŸŸ¡ MEDIUM** â€” `to_dict()` â€” appears in 2 domains (~103 lines saved)
  - Domains: `contaminants`, `materials`

**ðŸŸ¡ MEDIUM** â€” `get_pattern()` â€” appears in 2 domains (~41 lines saved)
  - Domains: `contaminants`, `materials`

**ðŸŸ¡ MEDIUM** â€” `load_regulatory_standards_content()` â€” appears in 2 domains (~31 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¡ MEDIUM** â€” `load_micros()` â€” appears in 2 domains (~27 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¡ MEDIUM** â€” `load_faqs()` â€” appears in 2 domains (~27 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¡ MEDIUM** â€” `_load_type_data()` â€” appears in 2 domains (~24 lines saved)
  - Domains: `contaminants`, `settings`

**ðŸŸ¡ MEDIUM** â€” `get_material()` â€” appears in 3 domains (~22 lines saved)
  - Domains: `compounds`, `contaminants`, `materials`

**ðŸŸ¡ MEDIUM** â€” `load_properties()` â€” appears in 2 domains (~22 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¡ MEDIUM** â€” `load_industry_applications()` â€” appears in 2 domains (~21 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¡ MEDIUM** â€” `load_categories()` â€” appears in 2 domains (~21 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¡ MEDIUM** â€” `load_property_definitions()` â€” appears in 2 domains (~21 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¡ MEDIUM** â€” `load_parameter_definitions()` â€” appears in 2 domains (~21 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¡ MEDIUM** â€” `load_regulatory_standards()` â€” appears in 2 domains (~21 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¡ MEDIUM** â€” `clear_cache()` â€” appears in 3 domains (~20 lines saved)
  - Domains: `compounds`, `contaminants`, `materials`

**ðŸŸ¡ MEDIUM** â€” `_load_yaml_file()` â€” appears in 2 domains (~20 lines saved)
  - Domains: `contaminants`, `materials`

**ðŸŸ¡ MEDIUM** â€” `__post_init__()` â€” appears in 2 domains (~20 lines saved)
  - Domains: `contaminants`, `materials`

**ðŸŸ¡ MEDIUM** â€” `_validate_identifier()` â€” appears in 2 domains (~20 lines saved)
  - Domains: `contaminants`, `settings`

**ðŸŸ¡ MEDIUM** â€” `shared.exceptions.GenerationError` â€” used by 2 domains, absent in 3
  - Domains: `contaminants`, `settings`

**ðŸŸ¡ MEDIUM** â€” `shared.utils.file_io.read_yaml_file` â€” used by 2 domains, absent in 3
  - Domains: `compounds`, `materials`

### ðŸŸ¢ LOW PRIORITY

**ðŸŸ¢ LOW** â€” `_get_output_filename()` â€” appears in 2 domains (~12 lines saved)
  - Domains: `contaminants`, `settings`

**ðŸŸ¢ LOW** â€” `_find_project_root()` â€” appears in 2 domains (~11 lines saved)
  - Domains: `contaminants`, `materials`

**ðŸŸ¢ LOW** â€” `_get_key()` â€” appears in 2 domains (~7 lines saved)
  - Domains: `contaminants`, `materials`

**ðŸŸ¢ LOW** â€” `_get_schema_name()` â€” appears in 2 domains (~7 lines saved)
  - Domains: `contaminants`, `settings`

**ðŸŸ¢ LOW** â€” `get_category_ranges()` module-level â€” 2 domains (~4 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¢ LOW** â€” `list_materials()` â€” appears in 2 domains (~2 lines saved)
  - Domains: `contaminants`, `materials`

**ðŸŸ¢ LOW** â€” `list_patterns()` â€” appears in 2 domains (~2 lines saved)
  - Domains: `contaminants`, `materials`

**ðŸŸ¢ LOW** â€” `load_material()` module-level â€” 2 domains (~2 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¢ LOW** â€” `get_material_names()` module-level â€” 2 domains (~2 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¢ LOW** â€” `load_properties_yaml()` module-level â€” 2 domains (~2 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¢ LOW** â€” `get_property_definitions()` module-level â€” 2 domains (~2 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¢ LOW** â€” `load_parameter_definitions_yaml()` module-level â€” 2 domains (~2 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¢ LOW** â€” `clear_cache()` module-level â€” 2 domains (~2 lines saved)
  - Domains: `compounds`, `materials`

**ðŸŸ¢ LOW** â€” `generator.py` â€” identical path in 2 domains
  - Domains: `contaminants`, `settings`

---

## Suggested Next Sessions

Work through HIGH items in order. Contract per session:

1. Read all N domain copies side-by-side
2. Identify canonical (most callers, most complete)
3. Identify divergences (meaningful vs drift?)
4. Write to `shared/` with proper namespace
5. Shim each domain's old path (one-liner re-export)
6. Run full test suite â€” must be green
7. Delete originals, commit as atomic unit
8. Re-run `python3 scripts/audit/structural_parity.py`
