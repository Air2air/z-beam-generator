# Contaminants Domain Export Configuration
# Cross-references: domains/contaminants/config.yaml (generation settings)
# Schema: export/config/schema.yaml

domain: contaminants
source_file: data/contaminants/Contaminants.yaml
output_path: ../z-beam/frontmatter/contaminants
items_key: contaminants
id_field: id
filename_suffix: ''

generators:
# Core Principle 0.6 Compliance (Jan 7, 2026): ✅ COMPLETE
# ALL data enhancement tasks moved to source enrichment (scripts/enrichment/enrich_source_data.py)
# Export now ONLY transforms format, adds ONLY export-time fields (dateModified, pageTitle)
- type: universal_content
  module: export.generation.universal_content_generator
  class: UniversalContentGenerator
  tasks:
  - type: export_metadata
    description: Add ONLY export-time fields (dateModified, pageTitle if missing)
  - type: text_field_normalization
    description: Normalize text wrapper artifacts in description fields
    fields:
      - page_description
      - pageDescription
  - type: camelcase_normalization
    description: Convert snake_case → camelCase for software metadata fields
  # NOTE (Jan 5, 2026): section_metadata task removed - _section metadata now exists in source data
  # Per Core Principle 0.6: No Build-Time Data Enhancement
  - type: field_cleanup
    description: Remove deprecated and stale fields from contaminants frontmatter
    deprecated_fields:
      - page_description    # snake_case residual; canonical field is pageDescription
      - title               # legacy duplicate of pageTitle
      - authorId            # deprecated (Feb 2026)
      - contextNotes        # draft-era field not consumed by frontend
      - realismNotes        # draft-era field not consumed by frontend
  - type: field_ordering
    domain: contaminants
    description: Organize output structure
- type: excerpt
  module: shared.generation.excerpt_generator
  class: ExcerptGenerator
  source_field: contaminant_description
  output_field: micro
  mode: sentences
  length: 2
- type: field_order
  module: export.generation.field_order_generator
  class: FieldOrderGenerator
  domain: contaminants
  description: Normalize field order for consistency (must run last)
# Archived enrichers (Dec 29, 2025): All functionality moved to UniversalContentGenerator
