# Contaminants Domain Export Configuration
# Cross-references: domains/contaminants/config.yaml (generation settings)
# Schema: export/config/schema.yaml

domain: contaminants
source_file: data/contaminants/Contaminants.yaml
output_path: ../z-beam/frontmatter/contaminants
items_key: contaminants
id_field: id
filename_suffix: ''

generators:
# Core Principle 0.6 Compliance (Jan 7, 2026): ✅ COMPLETE
# ALL data enhancement tasks moved to source enrichment (scripts/enrichment/enrich_source_data.py)
# Export now ONLY transforms format, adds ONLY export-time fields (dateModified, pageTitle)
- type: universal_content
  module: export.generation.universal_content_generator
  class: UniversalContentGenerator
  tasks:
  - type: export_metadata
    description: Add ONLY export-time fields (dateModified, pageTitle if missing)
  - type: camelcase_normalization
    description: Convert snake_case → camelCase for software metadata fields
  # NOTE (Jan 5, 2026): section_metadata task removed - _section metadata now exists in source data
  # Per Core Principle 0.6: No Build-Time Data Enhancement
  - type: field_ordering
    domain: contaminants
    description: Organize output structure
- type: excerpt
  module: shared.generation.excerpt_generator
  class: ExcerptGenerator
  source_field: contaminant_description
  output_field: micro
  mode: sentences
  length: 2
# NOTE (Jan 5, 2026): section_metadata generator removed - _section metadata now exists in source data
# Per Core Principle 0.6: No Build-Time Data Enhancement - all metadata must exist in source YAML
- type: safety_table_normalizer
  module: export.archive.enrichers-deprecated-dec29-2025.contaminants.safety_table_normalizer
  class: SafetyTableNormalizer
  description: Normalize safety table formats (fumes_generated, particulate_generation)
- type: field_order
  module: export.archive.enrichers-deprecated-dec29-2025.metadata.field_order_enricher
  class: FieldOrderEnricher
  description: Normalize field order for consistency (must run last)
# Enrichers deprecated - all functionality moved to generators above
# See: export/archive/enrichers-deprecated-dec29-2025/
_deprecated_enrichments:
- type: universal_restructure
  module: export.archive.enrichers-deprecated-dec29-2025.linkage.restructure_enricher
  class: UniversalRestructureEnricher
  domain: contaminants
  cleanup_rules:
    old_relationship_keys:
    - related_contaminants
    - related_materials
    - related_compounds
    legacy_fields:
    - metadata
    - voice_enhanced
    - valid_materials
    - description
    extract_from_nested:
      laser_properties:
      - safety_data
    duplicate_fields:
      visual_characteristics: visual_characteristics
      laser_properties: laser_properties
    move_to_relationships:
    - eeat
    - caution_materials
    - prohibited_materials
    - regulatory_standards_detail
    - context_notes
    - realism_notes
    - formation_conditions
    - safety_data
    - chemical_formula
    - scientific_name
    - required_elements
    keep_at_top_level:
    - safety_data
    - category
    - subcategory
    - images
- type: compound_linkage
  module: export.archive.enrichers-deprecated-dec29-2025.linkage.compound_linkage_enricher
  class: CompoundLinkageEnricher
  field: produces_compounds
  title: Compounds Released
  description: Hazardous fumes and particles generated when removing this contamination
  source: data/compounds/Compounds.yaml
  defaults:
  - concentration_range
  - hazard_class
  - exposure_limits
  - control_measures
  - cas_number
  - compound_category
- type: material_linkage
  module: export.archive.enrichers-deprecated-dec29-2025.linkage.material_linkage_enricher
  class: MaterialLinkageEnricher
  field: materials
  title: Found on Materials
  description: Materials commonly affected by this type of contamination
  source: data/materials/Materials.yaml
  defaults:
  - category
  - subcategory
  - material_type
  - thermal_conductivity
  - reflectivity
- type: removal_by_material
  module: export.archive.enrichers-deprecated-dec29-2025.contaminants.removal_by_material_enricher
  class: RemovalByMaterialEnricher
  description: Material-specific laser removal parameters, efficiency, and safety
    guidance (Dec 20, 2025)
- type: settings_linkage
  module: export.archive.enrichers-deprecated-dec29-2025.linkage.settings_linkage_enricher
  class: SettingsLinkageEnricher
  field: related_settings
  title: Effective Settings
  description: Laser parameters optimized for removing this type of contamination
  source: data/settings/Settings.yaml
  defaults:
  - setting_category
  - power_watts
- type: timestamp
  module: export.archive.enrichers-deprecated-dec29-2025.metadata.timestamp_enricher
  class: TimestampEnricher
  fields:
  - datePublished
  - dateModified
- type: author
  module: export.archive.enrichers-deprecated-dec29-2025.linkage.author_enricher
  class: AuthorEnricher
- type: images
  module: export.archive.enrichers-deprecated-dec29-2025.media.image_enricher
  class: ImageEnricher
  domain: contaminants
- type: breadcrumb
  module: export.archive.enrichers-deprecated-dec29-2025.navigation.breadcrumb_enricher
  class: BreadcrumbEnricher
  domain: contaminants
  category_field: category
  subcategory_field: subcategory
  name_field: name
- type: relationship_group
  module: export.archive.enrichers-deprecated-dec29-2025.relationships.group_enricher
  class: RelationshipGroupEnricher
  description: Group relationships into technical/safety/operational categories
  relationship_groups:
    technical:
    - affects_materials
    - produces_compounds
    safety:
    - regulatory_standards
    - caution_materials
    operational:
    - common_challenges
    - industry_applications
_deprecated_library_enrichments:
  enabled: false
  enrichments:
  - type: regulatory_standards
    relationship_field: relationships.regulatory_standards
    output_field: regulatory_standards_detail
