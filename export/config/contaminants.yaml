# Contaminants Domain Export Configuration
# Cross-references: domains/contaminants/config.yaml (generation settings)
# Schema: export/config/schema.yaml

domain: contaminants
source_file: data/contaminants/contaminants.yaml
output_path: ../z-beam/frontmatter/contaminants
items_key: contaminants
id_field: id
filename_suffix: ''
prune_stale_files: true

generators:
# Core Principle 0.6 Compliance (Jan 7, 2026): ✅ COMPLETE
# ALL data enhancement tasks moved to source enrichment (scripts/enrichment/enrich_source_data.py)
# Export now ONLY transforms format, adds ONLY export-time fields (dateModified, pageTitle)
- type: universal_content
  module: export.generation.universal_content_generator
  class: UniversalContentGenerator
  tasks:
  - type: export_metadata
    description: Add ONLY export-time fields (dateModified, pageTitle if missing)
  - type: author_linkage
    author_file: data/authors/Authors.yaml
    remove_author_id: true
    description: Hydrate authorId to full author object and remove deprecated field
  - type: text_field_normalization
    description: Normalize text wrapper artifacts in description fields
    fields:
      - page_description
      - pageDescription
  - type: camelcase_normalization
    description: Convert snake_case → camelCase for software metadata fields
  # NOTE (Jan 5, 2026): section_metadata task removed - _section metadata now exists in source data
  # Per Core Principle 0.6: No Build-Time Data Enhancement
  - type: field_cleanup
    description: Remove deprecated and stale fields from contaminants frontmatter
    deprecated_fields:
      - description         # forbidden root field; canonical is pageDescription
      - page_description    # snake_case residual; canonical field is pageDescription
      - title               # legacy duplicate of pageTitle
      - authorId            # deprecated (Feb 2026)
      - contextNotes        # draft-era field not consumed by frontend
      - realismNotes        # draft-era field not consumed by frontend
  - type: field_ordering
    domain: contaminants
    description: Organize output structure
# excerpt→micro generator REMOVED (Feb 2026): micro is materials-only domain field
- type: field_order
  module: export.generation.field_order_generator
  class: FieldOrderGenerator
  domain: contaminants
  description: Normalize field order for consistency (must run last)
# Archived enrichers (Dec 29, 2025): All functionality moved to UniversalContentGenerator
