domain: compounds
source_file: data/compounds/Compounds.yaml
output_path: ../z-beam/frontmatter/compounds
items_key: compounds
id_field: id
filename_suffix: ''  # IDs already have -compound suffix, no need to add again
sluggify_filenames: true
enrichments:
- type: universal_restructure
  module: export.enrichers.universal.universal_restructure_enricher
  class: UniversalRestructureEnricher
  domain: compounds
  cleanup_rules:
    old_relationship_keys:
    - related_contaminants
    - related_materials
    - related_compounds
    legacy_fields:
    - metadata
    - eeat
    - voice_enhanced
    duplicate_fields:
      emergency_response: emergency_response
      physical_properties: physical_properties
      ppe_requirements: ppe_requirements
      environmental_impact: environmental_impact
      detection_monitoring: detection_monitoring
    move_to_relationships:
    - chemical_properties
    - toxicity
    - formation_sources
    # health_effects - REMOVED (already in relationships, don't move from root)
    - exposure_monitoring
    - personal_protection
    - occupational_exposure_limits
    - regulatory_frameworks
    - ventilation_systems
    - engineering_controls
    - safe_work_practices
    - medical_surveillance
    - risk_assessment
- type: contaminant_linkage
  module: export.enrichers.linkage.contaminant_linkage_enricher
  class: ContaminantLinkageEnricher
  field: source_contaminants
  title: Found in Contaminants
  description: Contamination patterns that contain or release this compound
  source: data/contaminants/Contaminants.yaml
  defaults:
  - category
  - subcategory
  - hazard_level
  - contaminant_category
  - commonality_score
- type: material_linkage
  module: export.enrichers.linkage.material_linkage_enricher
  class: MaterialLinkageEnricher
  field: affected_materials
  title: Produced from Materials
  description: Materials that generate this compound when laser processed
  source: data/materials/Materials.yaml
  defaults:
  - category
  - subcategory
  - material_type
  - thermal_conductivity
  - reflectivity
- type: settings_linkage
  module: export.enrichers.linkage.settings_linkage_enricher
  class: SettingsLinkageEnricher
  field: related_settings
  title: Relevant Settings
  description: Laser configurations where this compound safety data is applicable
  source: data/settings/Settings.yaml
  defaults:
  - setting_category
  - power_watts
  - pulse_frequency_hz
  - recommended_for
- type: timestamp
  module: export.enrichers.metadata.timestamp_enricher
  class: TimestampEnricher
  fields:
  - datePublished
  - dateModified
- type: author
  module: export.enrichers.metadata.author_enricher
  class: AuthorEnricher
- type: breadcrumb
  module: export.enrichers.navigation.breadcrumb_enricher
  class: BreadcrumbEnricher
  domain: compounds
  category_field: category
  subcategory_field: subcategory
  name_field: name
- type: title
  module: export.generation.title_generator
  class: TitleGenerator
  template: "{name}"
  use_display_name: true
  skip_if_exists: true
# - type: relationship_urls  # DISABLED - Frontend derives URLs from full_path (ID-based lookup)
#   module: export.enrichers.relationships.relationship_url_enricher
#   class: RelationshipURLEnricher
#   description: Adds url field to all relationship items based on target's full_path
- type: relationship_intensity
  module: export.enrichers.relationships.intensity_enricher
  class: IntensityEnricher
  description: Dynamically derives intensity from severity/effectiveness/frequency
library_enrichments:
  enabled: false  # Disabled - keep library references in card format (not enriched)
  # Emergency response, health_effects, etc. stay as {presentation: 'card', items: [{type, id, overrides}]}
  # Frontend will look up full data from library by ID at render time
  enrichments:
  - type: emergency_response
    relationship_field: relationships.emergency_response
    output_field: emergency_response_detail
generators:
- type: seo_metadata
  module: export.generation.seo_metadata_generator
  class: SEOMetadataGenerator
  page_type: compound
  title_field: page_title
  description_field: meta_description
- type: field_cleanup
  module: export.enrichers.cleanup.field_cleanup_enricher
  class: FieldCleanupEnricher
- type: seo_description
  module: shared.generation.seo_description_generator
  class: SEODescriptionGenerator
  source_field: description
  output_field: seo_description
  max_length: 160
- type: excerpt
  module: shared.generation.excerpt_generator
  class: ExcerptGenerator
  source_field: description
  output_field: micro
  mode: sentences
  length: 2
- type: section_metadata
  module: export.generation.section_metadata_generator
  class: SectionMetadataGenerator
  sections:
    chemical_properties:
      presentation: card
    produced_from_contaminants:
      presentation: card
    produced_from_materials:
      presentation: card
    ppe_requirements:
      presentation: card
    environmental_impact:
      presentation: card
    detection_monitoring:
      presentation: card
    health_effects:
      presentation: card
    emergency_response:
      presentation: card
enrichers:
- name: DomainLinkagesEnricher
  enabled: true
  config:
    relationship_types:
    - produced_from_materials
    - produced_from_contaminants
