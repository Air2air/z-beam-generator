# Materials Domain Export Configuration
# Cross-references: domains/materials/config.yaml (generation settings)
# Schema: export/config/schema.yaml

domain: materials
source_file: data/materials/Materials.yaml
output_path: ../z-beam/frontmatter/materials
items_key: materials
filename_suffix: ''
relationship_groups:
  technical:
  - contaminated_by
  safety:
  - regulatory_standards
  operational:
  - industry_applications
id_field: id
generators:
# Core Principle 0.6 Compliance (Jan 7, 2026): ✅ COMPLETE
# ALL data complete in source - export adds ONLY export-time fields
# Phase 1 (Jan 6): Backfilled all 438 items with fullPath, breadcrumb, metaDescription
# Phase 2 (Jan 7): Generation layer adds metadata to NEW items via enrich_on_save()
# Phase 3 (Jan 7): Export adds ONLY: dateModified (timestamp), pageTitle (if missing)
- type: universal_content
  module: export.generation.universal_content_generator
  class: UniversalContentGenerator
  tasks:
  # Phase 1: Remove Duplicate/Legacy Fields (FRONTMATTER_REORGANIZATION_REQUIRED.md)
  - type: field_cleanup
    description: Remove duplicate and legacy fields per reorganization requirements
    deprecated_fields:
      # DELETE - Superseded by properties.materialCharacteristics
      - materialCharacteristics_description
      # DELETE - Superseded by properties.laserMaterialInteraction  
      - laserMaterialInteraction_description
      # DELETE - Duplicate of properties.materialCharacteristics.description
      - properties.materialCharacteristics.description
      # DELETE - Duplicate of properties.laserMaterialInteraction.description
      - properties.laserMaterialInteraction.description
      # DELETE - Should be structured array in relationships, not text
      - relationships.relatedMaterials
      # DELETE - Duplicate of components.micro (when it appears at root level)
      - micro  # Only if components.micro exists
      # DELETE - Empty/unused arrays
      - related_materials
      # DELETE - General cleanup for reorganization
      - characteristics  # Legacy section - superseded by properties
      - pageDescription  # Not consumed by MaterialsLayout
      - excerpt         # Not consumed by MaterialsLayout
      - breadcrumb      # Not consumed by MaterialsLayout per optimization
      - keywords        # Not consumed by MaterialsLayout
      - technicalSpecifications  # Not referenced anywhere
      - chemicalProperties       # Not referenced anywhere
      - safetyGuidelines        # Not referenced anywhere
      - dataValidation          # Not displayed to users
      - generatedDate           # Not displayed to users
      - lastModified            # Not displayed to users
  # Export-time metadata ONLY (dateModified timestamp, pageTitle for frontend)
  - type: export_metadata
    description: Add ONLY export-time fields (dateModified, pageTitle if missing)
  # TRANSFORM-ONLY tasks
  - type: camelcase_normalization
    description: Convert snake_case → camelCase for software metadata fields (legacy data only)
  - type: field_ordering
    domain: materials
    description: Organize output structure
  # normalize_expert_answers removed (Jan 5, 2026) - FAQ → expert_answers conversion
  # must happen during source data generation, not at export time (Core Principle 0.6)
- type: field_order
  module: export.generation.field_order_generator
  class: FieldOrderGenerator
  description: Normalize field order for consistency (must run last)
# Enrichers deprecated - all functionality moved to generators above
