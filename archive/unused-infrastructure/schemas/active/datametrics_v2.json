{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DataMetric Schema",
  "description": "Schema for property values - supports legacy, pulse-specific, and wavelength-specific formats (Oct 2025 update)",
  "oneOf": [
    {
      "$ref": "#/definitions/LegacyDataMetric"
    },
    {
      "$ref": "#/definitions/PulseSpecificDataMetric"
    },
    {
      "$ref": "#/definitions/WavelengthSpecificDataMetric"
    }
  ],
  "definitions": {
    "LegacyDataMetric": {
      "type": "object",
      "description": "Legacy format with single value - original AI-generated or authoritative with source attribution",
      "required": ["value", "unit"],
      "properties": {
        "value": {
          "type": "number",
          "description": "Numeric value of the property"
        },
        "unit": {
          "type": "string",
          "description": "Unit of measurement"
        },
        "min": {
          "type": ["number", "null"],
          "description": "Minimum value in range (null for legacy, numeric for authoritative)"
        },
        "max": {
          "type": ["number", "null"],
          "description": "Maximum value in range (null for legacy, numeric for authoritative)"
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Confidence score for this property (0-100)"
        },
        "description": {
          "type": "string",
          "description": "Property description and relevance to laser cleaning"
        },
        "source": {
          "type": "string",
          "description": "Research source for authoritative data (e.g., 'MatWeb Materials Database')"
        },
        "notes": {
          "type": "string",
          "description": "Contextual notes or measurement conditions"
        },
        "validation": {
          "type": "object",
          "description": "Research validation metadata (legacy field, may be deprecated)",
          "properties": {
            "confidence_score": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            },
            "sources_validated": {
              "type": "integer",
              "minimum": 0
            },
            "research_sources": {
              "type": "array",
              "items": {"type": "string"}
            },
            "accuracy_class": {
              "type": "string",
              "enum": ["verified", "validated", "estimated", "calculated"]
            },
            "material_specific": {
              "type": "boolean"
            }
          }
        }
      }
    },
    "PulseSpecificDataMetric": {
      "type": "object",
      "description": "Pulse-specific format for pulse-duration-dependent properties (Priority 2 authoritative data)",
      "required": ["confidence"],
      "properties": {
        "nanosecond": {
          "type": "object",
          "description": "Nanosecond pulse duration range",
          "required": ["min", "max", "unit"],
          "properties": {
            "min": {"type": "number"},
            "max": {"type": "number"},
            "unit": {"type": "string"}
          }
        },
        "picosecond": {
          "type": "object",
          "description": "Picosecond pulse duration range",
          "required": ["min", "max", "unit"],
          "properties": {
            "min": {"type": "number"},
            "max": {"type": "number"},
            "unit": {"type": "string"}
          }
        },
        "femtosecond": {
          "type": "object",
          "description": "Femtosecond pulse duration range",
          "required": ["min", "max", "unit"],
          "properties": {
            "min": {"type": "number"},
            "max": {"type": "number"},
            "unit": {"type": "string"}
          }
        },
        "source": {
          "type": "string",
          "description": "Research source (e.g., 'Marks et al. 2022, Precision Engineering')"
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Confidence score (typically 90 for peer-reviewed research)"
        },
        "measurement_context": {
          "type": "string",
          "description": "Context for measurements (e.g., 'Varies by pulse duration (ns/ps/fs)')"
        }
      }
    },
    "WavelengthSpecificDataMetric": {
      "type": "object",
      "description": "Wavelength-specific format for wavelength-dependent properties (Priority 2 authoritative data)",
      "required": ["confidence"],
      "properties": {
        "at_1064nm": {
          "type": "object",
          "description": "1064nm wavelength (Nd:YAG, Fiber lasers)",
          "required": ["min", "max", "unit"],
          "properties": {
            "min": {"type": "number"},
            "max": {"type": "number"},
            "unit": {"type": "string"}
          }
        },
        "at_532nm": {
          "type": "object",
          "description": "532nm wavelength (Green doubled Nd:YAG)",
          "required": ["min", "max", "unit"],
          "properties": {
            "min": {"type": "number"},
            "max": {"type": "number"},
            "unit": {"type": "string"}
          }
        },
        "at_355nm": {
          "type": "object",
          "description": "355nm wavelength (UV tripled Nd:YAG)",
          "required": ["min", "max", "unit"],
          "properties": {
            "min": {"type": "number"},
            "max": {"type": "number"},
            "unit": {"type": "string"}
          }
        },
        "at_10640nm": {
          "type": "object",
          "description": "10640nm wavelength (CO2 lasers)",
          "required": ["min", "max", "unit"],
          "properties": {
            "min": {"type": "number"},
            "max": {"type": "number"},
            "unit": {"type": "string"}
          }
        },
        "source": {
          "type": "string",
          "description": "Research source (e.g., 'Handbook of Optical Constants (Palik)')"
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Confidence score (typically 85 for handbook data)"
        },
        "measurement_context": {
          "type": "string",
          "description": "Context for measurements (e.g., 'Varies by laser wavelength')"
        }
      }
    }
  }
}
