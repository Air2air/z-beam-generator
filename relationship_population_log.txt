================================================================================
PHASE 1: DOMAIN ASSOCIATIONS AUDIT
================================================================================

ğŸ“ Loading data files...
   Materials: 153 items
   Contaminants: 98 items
   Compounds: 34 items
   Settings: 153 items

ğŸ“Š Current Association Coverage:
--------------------------------------------------------------------------------
   material_to_contaminant: 0 relationships
   material_to_compound: 0 relationships
   material_to_setting: 0 relationships
   contaminant_to_material: 0 relationships
   compound_to_material: 0 relationships
   setting_to_material: 0 relationships

   TOTAL CURRENT RELATIONSHIPS: 0

ğŸ¯ Expected Relationships (Full Population):
--------------------------------------------------------------------------------
   material_to_contaminant: 1224 expected, 0 current (0.0% coverage)
   material_to_compound: 459 expected, 0 current (0.0% coverage)
   material_to_setting: 153 expected, 0 current (0.0% coverage)
   contaminant_to_material: 1176 expected, 0 current (0.0% coverage)
   compound_to_material: 408 expected, 0 current (0.0% coverage)
   setting_to_material: 153 expected, 0 current (0.0% coverage)

   TOTAL EXPECTED RELATIONSHIPS: 3573
   CURRENT COVERAGE: 0/3573 (0.0%)
   GAP: 3573 relationships missing

ğŸ” Orphaned Items Analysis:
--------------------------------------------------------------------------------
   Orphaned Materials: 153/153 (100.0%)
   Orphaned Contaminants: 98/98 (100.0%)
   Orphaned Compounds: 34/34 (100.0%)
   Orphaned Settings: 153/153 (100.0%)

   TOTAL ORPHANED ITEMS: 438/438 (100.0%)

ğŸ’¾ Saving detailed gap report...
   Saved: /Users/todddunning/Desktop/Z-Beam/z-beam-generator/ASSOCIATION_AUDIT_REPORT_DEC20_2025.yaml

================================================================================
âœ… PHASE 1 COMPLETE
================================================================================

ğŸ“Š KEY FINDINGS:
   â€¢ Current relationships: 0
   â€¢ Expected relationships: 3573
   â€¢ Coverage: 0.0%
   â€¢ Orphaned items: 438 (100.0%)

ğŸ“ Next: Phase 2 will auto-populate 3573 missing relationships

================================================================================
PHASE 2: AUTO-POPULATE RELATIONSHIPS
================================================================================

ğŸ“ Loading data files...
   Materials: 153
   Contaminants: 98
   Compounds: 34
   Settings: 153

ğŸ”— Strategy 1: Material â†” Setting (1:1 Mapping)
--------------------------------------------------------------------------------
   Added 0 materialâ†’setting relationships
   Added 0 settingâ†’material relationships

ğŸ”— Strategy 2: Material â†’ Contaminant (Pattern Matching)
--------------------------------------------------------------------------------
   Added 2142 materialâ†’contaminant relationships
   Added 2142 contaminantâ†’material relationships

ğŸ”— Strategy 3: Material â†’ Compound (Production Matching)
--------------------------------------------------------------------------------
   Added 0 materialâ†’compound relationships
   Added 0 compoundâ†’material relationships

ğŸ’¾ Saving updated DomainAssociations.yaml...
   Backup created: /Users/todddunning/Desktop/Z-Beam/z-beam-generator/data/associations/DomainAssociations.yaml.backup
   Saved: /Users/todddunning/Desktop/Z-Beam/z-beam-generator/data/associations/DomainAssociations.yaml

================================================================================
âœ… PHASE 2 COMPLETE
================================================================================

ğŸ“Š RELATIONSHIPS ADDED: 4284
   â€¢ Material â†’ Setting: 0
   â€¢ Setting â†’ Material: 0
   â€¢ Material â†’ Contaminant: 2142
   â€¢ Contaminant â†’ Material: 2142
   â€¢ Material â†’ Compound: 0
   â€¢ Compound â†’ Material: 0

ğŸ“ Next: Phase 3 will enable enrichers to use these relationships

================================================================================
PHASE 3: ENABLE ENRICHERS
================================================================================

ğŸ“ Updating export/config/materials.yaml...
   âœ… Enabled: related_settings, removes_contaminants, produces_compounds

ğŸ“ Updating export/config/contaminants.yaml...
   âœ… Enabled: affects_materials, found_on_materials

ğŸ“ Updating export/config/compounds.yaml...
   âœ… Enabled: produced_by_materials

ğŸ“ Updating export/config/settings.yaml...
   âœ… Enabled: applies_to_materials, effective_against_contaminants

================================================================================
âœ… PHASE 3 COMPLETE
================================================================================

ğŸ“Š CONFIGS UPDATED: 4
   â€¢ Materials: 3 relationship types enabled
   â€¢ Contaminants: 2 relationship types enabled
   â€¢ Compounds: 1 relationship type enabled
   â€¢ Settings: 2 relationship types enabled

ğŸ“ Next: Phase 4 will create comprehensive link validator

================================================================================
PHASE 4: COMPREHENSIVE LINK VALIDATION
================================================================================

ğŸ“ Scanning frontmatter directory: /Users/todddunning/Desktop/Z-Beam/z-beam/frontmatter

ğŸ” Building frontmatter index...
   Indexed 438 files

ğŸ” Validating links...
--------------------------------------------------------------------------------

ğŸ”„ Checking bidirectional consistency...

================================================================================
VALIDATION RESULTS
================================================================================

ğŸ“Š FILES SCANNED: 438
ğŸ”— TOTAL LINKS: 1940

âœ… STRUCTURAL VALIDATION:
   âŒ Errors: 1940
      â€¢ /Users/todddunning/Desktop/Z-Beam/z-beam/frontmatter/contaminants/water-stain-contamination.yaml: Missing fields: name, slug, full_path
      â€¢ /Users/todddunning/Desktop/Z-Beam/z-beam/frontmatter/contaminants/water-stain-contamination.yaml: Missing fields: name, slug, full_path
      â€¢ /Users/todddunning/Desktop/Z-Beam/z-beam/frontmatter/contaminants/water-stain-contamination.yaml: Link is not a dictionary
      â€¢ /Users/todddunning/Desktop/Z-Beam/z-beam/frontmatter/contaminants/water-stain-contamination.yaml: Link is not a dictionary
      â€¢ /Users/todddunning/Desktop/Z-Beam/z-beam/frontmatter/contaminants/water-stain-contamination.yaml: Link is not a dictionary
      ... and 1935 more

âœ… TARGET EXISTENCE:
   âœ… Valid: 1940/1940 (100%)

âœ… FULL PATH FORMAT:
   âœ… Valid: 1940/1940 (100%)

âœ… BIDIRECTIONAL CONSISTENCY:
   âœ… All relationships are bidirectional

ğŸ¯ ORPHANED ITEMS: 0 (0.0%)

ğŸ“Š CROSS-DOMAIN STATISTICS:
   â€¢ compounds_links: 150
   â€¢ contaminants_links: 1484
   â€¢ settings_links: 306

================================================================================
âš ï¸  VALIDATION ISSUES FOUND: 1940 errors
================================================================================


â•”==============================================================================â•—
â•‘                                                                              â•‘
â•‘           RELATIONSHIP POPULATION & LINK VALIDATION - FULL PIPELINE          â•‘
â•‘                                                                              â•‘
â•‘  Started: 2025-12-20 11:43:02                                                â•‘
â•‘                                                                              â•‘
â•š==============================================================================â•


================================================================================
STARTING PHASE 1: Association Auditor
Time: 2025-12-20 11:43:02
================================================================================


âœ… Phase 1 completed successfully

================================================================================
STARTING PHASE 2: Auto-Populate Relationships
Time: 2025-12-20 11:43:12
================================================================================


âœ… Phase 2 completed successfully

================================================================================
STARTING PHASE 3: Enable Enrichers
Time: 2025-12-20 11:43:25
================================================================================


âœ… Phase 3 completed successfully

================================================================================
STARTING PHASE 4: Comprehensive Link Validator
Time: 2025-12-20 11:43:25
================================================================================


âŒ Phase 4 failed with exit code 1

================================================================================
âš ï¸  PIPELINE STOPPED AT PHASE 4
================================================================================


â•”==============================================================================â•—
â•‘                                                                              â•‘
â•‘                                PIPELINE SUMMARY                              â•‘
â•‘                                                                              â•‘
â•š==============================================================================â•

â±ï¸  Total Duration: 0:00:38.372169
ğŸ Completed: 2025-12-20 11:43:40

ğŸ“Š PHASE RESULTS:
--------------------------------------------------------------------------------
   Phase 1: Association Auditor                      âœ… PASS
   Phase 2: Auto-Populate Relationships              âœ… PASS
   Phase 3: Enable Enrichers                         âœ… PASS
   Phase 4: Comprehensive Link Validator             âŒ FAIL

================================================================================
âš ï¸  PIPELINE INCOMPLETE - REVIEW ERRORS ABOVE
================================================================================

âŒ Failed: Phase 4

